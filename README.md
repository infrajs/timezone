php timezone detecter
=

Очень короткий скрипт для определения временной зоны/часового пояса (timezone) установленного в операционной системе пользователя - в браузере. Скрипт работает со второго запроса, так как требуется установить кукис и только потом сервер узнает временную зону. К сожалению в первом запросе в заголовках не содержится никакого намёка на часовой пояс посетителя. 

Определённое значение устанавливается в качестве временной зоны по умолчанию date_default_timezone_set и функция datе везде изменит свой вывод.

Скрипт подходит для следующего сценария. Пользователь открывает форму, что будет является первым посещением и установится кукис. Пользователь заполняет данные и отправляет форму на сервер с AJAX или переходом на новую страницу, не имеет значения, сервер уже будет знать временную зону пользователя и сформирует корректное сообщение - что-то вроде: ваш запрос принят 05.09.2015 15:34

На сервере для хранения метки времени используется unix timestamp. Временная зона нужна только лишь для корректного отображения. В исключительной ситуации пользователь может увидеть время сервера, а не своё. Если он зашёл в новом браузере или очистил кукисы, но даже в этом случае вероятно потребуется авторизация пользователя или посещение начнётся с другой страницы, где время не показывается и при следующем же переходе по ссылке всё встанет на свои места.

Пример открывается по адресу vendor/infrajs/timeone/ после установки через composer
